## Type Narrowing

if 문 등으로 타입을 하나로 정해주는 것을 말한다

```ts
function 내함수(x: number | string) {
    if (typeof x === 'number') {
        return x + 1
    }
    else if (typeof x === 'string') {
        return x + 1
    }
    else {
        return 0
    }
}
```

if 문과 typeof 키워드로 현재 파라미터의 타입을 검사해서
"이게 'number' 타입일 경우 이렇게 해주세요~"
"이게 'string' 타입일 경우 이렇게 해주세요~"

이렇게 코드를 짜야 정상적으로 사용이 가능하다.

타입스크립트는 타입 애매한 걸 싫어해서 귀찮아도 해야된다.

이걸 "defensive 하게 코딩한다" 리고 하기도 한다.

그리고 또 함수 안에서 if문 쓸 때는 마지막에 else {} 이거 없으면 에러가 난다.
return 하지 않는 조건문이 있다면 나중에 버그가 생길 수 있어 에러를 내준다.


## Type Assertion

타입을 간편하게 assert 할수도 있다.

" 이 변수의 타입을 number로 생각해주세요"

이런 뜻으로 코드를 짜면 타입스크립트 컴파일러가 눈감아준다.

* 변수명 as string

```ts
function 내함수(x :number | string) {
    return (x as number) + 1
}

console.log(내함수(123))

```

변수명 as number 라고 쓰시면 

"나는 이 변수를 number라고 주장하겠습니다~" 라는 뜻이며 실제로 그렇게 타입을 변경해준다.

아무튼 이렇게 타입스크립트 컴파일러에게 반기를 들 수 있다.

근데 이러려면 내가 "함수에 무조건 숫자가 들어올 것이다" 라는 사실을 알고 있어야 안전하게 쓸 수 있는 문법이겠죠?"

as 키워드 사용시 특징이 있는데

1. as 키워드는 union type 같은 복잡한 타입을 하나의 정확한 타입으로 줄이는 역할을 수행한다. (number 타입을 as string 이렇게 바꾸려고 하면 에러가 난다.)

2. 실은 그냥 타입쉴드 임시 해제용이다. 실제 코드 실행 결과는 as 있을 때나 없을 때나 거의 동일하다.

아무튼 그러면 이제 변수를 숫자로 가정해서 가공할 수 있다.



### as 문법을 이럴 때만 사용하자

1. 왜 타입 에러가 나는지 정말 모르겠는 상황에 임시로 에러해결용으로 사용하거나
2. 내가 어떤 타입이 들어올 지 정말 화실하게 알고 있는데 컴파일러 에러가 방해할 때

뉴비처럼 온갖 군데 as 키워드 붙이면 안된다.




이런 식으로 as 라는 키워드를 쓰면 된다.

